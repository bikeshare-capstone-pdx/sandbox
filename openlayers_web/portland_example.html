<!DOCTYPE HTML>
<html>
<head>
    <title>OpenLayers Basic Example</title>

    <script src="http://www.openlayers.org/api/OpenLayers.js"></script>
    <script>
      function init() {
        map = new OpenLayers.Map("mapdiv");
        var mapnik = new OpenLayers.Layer.OSM();
        map.addLayer(mapnik);
			
         // allow testing of specific renderers via "?renderer=Canvas", etc
         var renderer = OpenLayers.Util.getParameters(window.location.href).renderer;
         renderer = (renderer) ? [renderer] : OpenLayers.Layer.Vector.prototype.renderers;

         /*
          * Layer style
          */
         // we want opaque external graphics and non-opaque internal graphics
         var layer_style = OpenLayers.Util.extend({}, OpenLayers.Feature.Vector.style['default']);
         layer_style.fillOpacity = 0.2;
         layer_style.graphicOpacity = 1;



        var lonlat = new OpenLayers.LonLat(-122.680591,45.510016).transform(
            new OpenLayers.Projection("EPSG:4326"), // transform from WGS 1984
            new OpenLayers.Projection("EPSG:900913") // to Spherical Mercator
          );
	var vectorLayer = new OpenLayers.Layer.Vector("Simple Geometry", {
                styleMap: new OpenLayers.StyleMap({'default':{
                    strokeColor: "${pointColor}",
                    strokeOpacity: 1,
                    strokeWidth: 3,
                    fillColor: "${pointColor}",
                    fillOpacity: 0.8,
                    pointRadius: 5,
                    pointerEvents: "visiblePainted",
                    label : "${name}",
                    fontColor: "${favColor}",
                    fontSize: "12px",
                    fontFamily: "Courier New, monospace",
                    fontWeight: "bold",
                    labelAlign: "${align}",
                    labelXOffset: "${xOffset}",
                    labelYOffset: "${yOffset}"
                }}),
                renderers: renderer
            });
        var zoom = 15;
	var point = new OpenLayers.Geometry.Point(-122.680591,45.510016);
	point.transform(
		   //this has to be done, not sure of the reason
	      	new OpenLayers.Projection("EPSG:4326"), 
	      	new OpenLayers.Projection("EPSG:900913") 
	
	);
	//var pointFeature = new OpenLayers.Feature.Vector(point,null,style_blue);
	var pointFeature = new OpenLayers.Feature.Vector(point);
	//pointFeature.attributes = {name : "FAB"};
	pointFeature.attributes = {
                name: "FAB",
                favColor: 'red',
                align: "cm",
		xOffset: 10,
		yOffset: 10,
		pointColor: 'blue'
            };
	var pizzaPoint = new OpenLayers.Geometry.Point(-122.680637,45.511542);
	pizzaPoint.transform(
			new OpenLayers.Projection("EPSG:4326"), 
	      		new OpenLayers.Projection("EPSG:900913") 
			);
	var pizzaPointFeature = new OpenLayers.Feature.Vector(pizzaPoint);
	pizzaPointFeature.attributes = {
		name : "Pizza Schmizza",
		favColor : 'blue',
		align : 'cm',
		xOffset : 10,
		yOffset : 10,
		pointColor : 'red'
	};
	var line =  new OpenLayers.Layer.Vector();
	line.addFeatures([new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString([point, pizzaPoint]))]);
	map.addLayer(vectorLayer);
	map.addLayer(line);
	vectorLayer.addFeatures([pointFeature, pizzaPointFeature]);
        map.setCenter(lonlat, zoom);
      }
    </script>

    <style>
    #mapdiv { width:700px; height:500px; }
    div.olControlAttribution { bottom:3px; }
    </style>

</head>

<body onload="init();">
    <p>Map of the general area around PSU</p>
    <div id="mapdiv"></div>
</body>
</html>
